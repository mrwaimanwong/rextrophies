
(function(a){a(document).ready(function(){var b={};a(".TabbedPanels").each(function(){var d=0;new Spry.Widget.TabbedPanels(a(this).attr("id"),{defaultTab:d})});window.check_the_max_input_vars=function(){var e=a("form#post input[type=text], form#post input[type=hidden], form#post input[type=button], form#post input[type=checkbox]:checked, form#post input[type=radio]:checked, form#post select, form#post input[type=date], form#post input[type=url], form#post input[type=time], form#post input[type=email], form#post input[type=number], form#post input[type=tel], form#post input[type=search], form#post input[type=image], form#post input[type=reset], form#post input[type=mot-cle], form#post textarea, form#post input[type=password] ").length;var f=o_max_input_msg.replace("{nb}",e);var d="<div class='vpc-error error'><p>"+f+"</p></div>";if(e>=o_max_input_vars){if(a(".vpc-error").length){a(".vpc-error").html("<p>"+f+"</p>")}else{a("#wpbody-content, #publishing-action").prepend(d)}a(".vpc-error").show();a("#publishing-action #publish, #save-action #save-post").prop("disabled",true)}else{a(".vpc-error").hide();a("#publishing-action #publish, #save-action #save-post").prop("disabled",false)}};function c(d,f){var e=d;var j=/{(.*?)}/g;var g=e.match(j);var h=(d.match(j)||[]).length;if(h>0){var k=f.parents(".o-rf-row");a.each(k,function(n,q){var p=new RegExp(g[0],"g");var o=a(q).index();e=e.replace(p,o);g.shift()})}var l=f.siblings("table.repeatable-fields-table").children("tbody").first();var i=l.children("tr").length;var m=new RegExp(g[0],"g");e=e.replace(m,i);return e}a(document).on("click",".add-rf-row",function(h){setTimeout(check_the_max_input_vars,200);var i=a(this).siblings("table").find("tbody").first();var f=a(this).data("tpl");var j=o_rows_tpl[f];var g=c(j,a(this));i.append(g);var d=i.children(".o-rf-row").last().find("a.o-modal-trigger");if(d.length){a.each(d,function(l,n){var m=a(this).data("modalid");var k=o_uniqid("o-modal-");a(this).attr("data-target","#"+k);a("#"+m).attr("id",k)})}});a(document).on("click",".remove-rf-row",function(d){setTimeout(check_the_max_input_vars,200);a(this).parent().parent().remove()});if(a(".add-rf-row").length){setTimeout(check_the_max_input_vars,200)}a(document).on("click",".o-add-media",function(g){g.preventDefault();var d=a(this);var f=wp.media({title:"Please set the picture",button:{text:"Select picture(s)"},multiple:false}).on("select",function(){var e=f.state().get("selection");e.map(function(i){i=i.toJSON();var h=i.url.replace(home_url,"");d.parent().find("input[type=hidden]").val(h);d.parent().find(".media-preview").html("<img src='"+i.url+"'>");d.parent().find(".media-name").html(i.filename);if(d.parent().hasClass("trigger-change")){d.parent().find("input[type=hidden]").trigger("propertychange")}})}).open()});a(document).on("click",".o-remove-media",function(d){d.preventDefault();a(this).parent().find(".media-preview").html("");a(this).parent().find("input[type=hidden]").val("");a(this).parent().find(".media-name").html("");if(a(this).parent().hasClass("trigger-change")){a(this).parent().find("input[type=hidden]").trigger("propertychange")}})})})(jQuery);function is_json(a){if(/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return true}else{return false}}function o_uniqid(e,d){if(typeof e==="undefined"){e=""}var c;var a=function(f,g){f=parseInt(f,10).toString(16);if(g<f.length){return f.slice(f.length-g)}if(g>f.length){return Array(1+(g-f.length)).join("0")+f}return f};if(!b){var b={}}if(!b.uniqidSeed){b.uniqidSeed=Math.floor(Math.random()*123456789)}b.uniqidSeed++;c=e;c+=a(parseInt(new Date().getTime()/1000,10),8);c+=a(b.uniqidSeed,5);if(d){c+=(Math.random()*10).toFixed(8).toString()}return c};